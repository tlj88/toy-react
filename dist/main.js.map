{"version":3,"sources":["webpack:///webpack/bootstrap","webpack:///./main.js","webpack:///./toy-react.js"],"names":["Square","props","onClick","value","Component","Board","i","squares","renderSquare","Game","state","history","Array","fill","stepNumber","xIsNext","slice","current","length","calculateWinner","setState","concat","step","winner","moves","map","move","desc","jumpTo","status","handleClick","render","document","getElementById","lines","a","b","c","RENDER_TO_DOM","Symbol","ElementWrapper","tagName","root","createElement","name","match","addEventListener","RegExp","$1","replace","toLocaleLowerCase","setAttribute","child","range","createRange","setStart","childNodes","setEnd","console","log","deleteContents","insertNode","TextWrapper","content","createTextNode","_root","attributes","children","_range","push","oldRange","startContainer","startOffset","endContainer","endOffset","newState","rerender","merge","oldState","p","insertChild","parent","appendChild","type","e","key","component","mountEle"],"mappings":"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","file":"main.js","sourcesContent":[" \t// The module cache\n \tvar installedModules = {};\n\n \t// The require function\n \tfunction __webpack_require__(moduleId) {\n\n \t\t// Check if module is in cache\n \t\tif(installedModules[moduleId]) {\n \t\t\treturn installedModules[moduleId].exports;\n \t\t}\n \t\t// Create a new module (and put it into the cache)\n \t\tvar module = installedModules[moduleId] = {\n \t\t\ti: moduleId,\n \t\t\tl: false,\n \t\t\texports: {}\n \t\t};\n\n \t\t// Execute the module function\n \t\tmodules[moduleId].call(module.exports, module, module.exports, __webpack_require__);\n\n \t\t// Flag the module as loaded\n \t\tmodule.l = true;\n\n \t\t// Return the exports of the module\n \t\treturn module.exports;\n \t}\n\n\n \t// expose the modules object (__webpack_modules__)\n \t__webpack_require__.m = modules;\n\n \t// expose the module cache\n \t__webpack_require__.c = installedModules;\n\n \t// define getter function for harmony exports\n \t__webpack_require__.d = function(exports, name, getter) {\n \t\tif(!__webpack_require__.o(exports, name)) {\n \t\t\tObject.defineProperty(exports, name, { enumerable: true, get: getter });\n \t\t}\n \t};\n\n \t// define __esModule on exports\n \t__webpack_require__.r = function(exports) {\n \t\tif(typeof Symbol !== 'undefined' && Symbol.toStringTag) {\n \t\t\tObject.defineProperty(exports, Symbol.toStringTag, { value: 'Module' });\n \t\t}\n \t\tObject.defineProperty(exports, '__esModule', { value: true });\n \t};\n\n \t// create a fake namespace object\n \t// mode & 1: value is a module id, require it\n \t// mode & 2: merge all properties of value into the ns\n \t// mode & 4: return value when already ns object\n \t// mode & 8|1: behave like require\n \t__webpack_require__.t = function(value, mode) {\n \t\tif(mode & 1) value = __webpack_require__(value);\n \t\tif(mode & 8) return value;\n \t\tif((mode & 4) && typeof value === 'object' && value && value.__esModule) return value;\n \t\tvar ns = Object.create(null);\n \t\t__webpack_require__.r(ns);\n \t\tObject.defineProperty(ns, 'default', { enumerable: true, value: value });\n \t\tif(mode & 2 && typeof value != 'string') for(var key in value) __webpack_require__.d(ns, key, function(key) { return value[key]; }.bind(null, key));\n \t\treturn ns;\n \t};\n\n \t// getDefaultExport function for compatibility with non-harmony modules\n \t__webpack_require__.n = function(module) {\n \t\tvar getter = module && module.__esModule ?\n \t\t\tfunction getDefault() { return module['default']; } :\n \t\t\tfunction getModuleExports() { return module; };\n \t\t__webpack_require__.d(getter, 'a', getter);\n \t\treturn getter;\n \t};\n\n \t// Object.prototype.hasOwnProperty.call\n \t__webpack_require__.o = function(object, property) { return Object.prototype.hasOwnProperty.call(object, property); };\n\n \t// __webpack_public_path__\n \t__webpack_require__.p = \"\";\n\n\n \t// Load entry module and return exports\n \treturn __webpack_require__(__webpack_require__.s = \"./main.js\");\n","import { createElement, Component, render } from './toy-react.js'\n\nclass Square extends Component {\n    render() {\n        return (\n            <button className=\"square\" onClick={this.props.onClick}>\n                {this.props.value}\n            </button>\n        );\n    }\n}\n\nclass Board extends Component {\n    renderSquare(i) {\n        return (\n            <Square\n                value={this.props.squares[i]}\n                onClick={() => this.props.onClick(i)}\n            />\n        );\n    }\n\n    render() {\n        return (\n            <div>\n                <div className=\"board-row\">\n                    {this.renderSquare(0)}\n                    {this.renderSquare(1)}\n                    {this.renderSquare(2)}\n                </div>\n                <div className=\"board-row\">\n                    {this.renderSquare(3)}\n                    {this.renderSquare(4)}\n                    {this.renderSquare(5)}\n                </div>\n                <div className=\"board-row\">\n                    {this.renderSquare(6)}\n                    {this.renderSquare(7)}\n                    {this.renderSquare(8)}\n                </div>\n            </div>\n        );\n    }\n}\n\nclass Game extends Component {\n    constructor(props) {\n        super(props);\n        this.state = {\n            history: [\n                {\n                    squares: Array(9).fill(null)\n                }\n            ],\n            stepNumber: 0,\n            xIsNext: true\n        };\n    }\n\n    handleClick(i) {\n        const history = this.state.history.slice(0, this.state.stepNumber + 1);\n        const current = history[history.length - 1];\n        const squares = current.squares.slice();\n        if (calculateWinner(squares) || squares[i]) {\n            return;\n        }\n        squares[i] = this.state.xIsNext ? \"X\" : \"O\";\n        this.setState({\n            history: history.concat([\n                {\n                    squares: squares\n                }\n            ]),\n            stepNumber: history.length,\n            xIsNext: !this.state.xIsNext\n        });\n    }\n\n    jumpTo(step) {\n        this.setState({\n            stepNumber: step,\n            xIsNext: (step % 2) === 0\n        });\n    }\n\n    render() {\n        const history = this.state.history;\n        const current = history[this.state.stepNumber];\n        const winner = calculateWinner(current.squares);\n\n        const moves = history.map((step, move) => {\n            const desc = move ?\n                'Go to move #' + move :\n                'Go to game start';\n            return (\n                <li key={move}>\n                    <button onClick={() => this.jumpTo(move)}>{desc}</button>\n                </li>\n            );\n        });\n\n        let status;\n        if (winner) {\n            status = \"Winner: \" + winner;\n        } else {\n            status = \"Next player: \" + (this.state.xIsNext ? \"X\" : \"O\");\n        }\n\n        return (\n            <div className=\"game\">\n                <div className=\"game-board\">\n                    <Board\n                        squares={current.squares}\n                        onClick={i => this.handleClick(i)}\n                    />\n                </div>\n                <div className=\"game-info\">\n                    <div>{status}</div>\n                    <ol>{moves}</ol>\n                </div>\n            </div>\n        );\n    }\n}\n\n// ========================================\nrender(<Game />, document.getElementById(\"root\"));\n\nfunction calculateWinner(squares) {\n    const lines = [\n        [0, 1, 2],\n        [3, 4, 5],\n        [6, 7, 8],\n        [0, 3, 6],\n        [1, 4, 7],\n        [2, 5, 8],\n        [0, 4, 8],\n        [2, 4, 6]\n    ];\n    for (let i = 0; i < lines.length; i++) {\n        const [a, b, c] = lines[i];\n        if (squares[a] && squares[a] === squares[b] && squares[a] === squares[c]) {\n            return squares[a];\n        }\n    }\n    return null;\n}\n\n\n\n\n// class MyComponent extends Component {\n//     constructor(props) { \n//         super(props)\n//         this.state = {\n//             a: 1,\n//             b: 2\n//         }\n//     }\n//     render() { \n//         return <div class=\"my-component\">\n//             <h1>my component</h1>\n//             <button onclick={() => { this.setState({ a: this.state.a++ })}}>click</button>\n//             <span>{this.state.a.toString()}</span>\n//             <span>{this.state.b.toString()}</span>\n//         </div>\n//     }\n// }\n\n\n// // jsx\n// render(<MyComponent id=\"app\" class=\"test\">\n//     <div>bjyx</div>\n//     <div></div>\n//     <div></div>\n// </MyComponent>, document.getElementById('app'))","const RENDER_TO_DOM = Symbol('render to dom')\n\n// 原生的DOM对象是无论如何都没有办法去appendChild一个component的，\n// 所以给原生dom对象封一层wrapper, wrapper具有setAttribute和appendChild方法，同时component也具有setAttribute和appendChild方法\nclass ElementWrapper { \n    constructor(tagName) { \n        this.root = document.createElement(tagName)\n    }\n\n    setAttribute(name, value) { \n        if (name.match(/^on([\\s\\S]+)/)) {\n            // RegExp.$1\n            this.root.addEventListener(RegExp.$1.replace(/^[\\s\\S]/, c => c.toLocaleLowerCase()), value)\n        } else { \n            if (name === 'className') {\n                name = 'class'\n            }\n            this.root.setAttribute(name, value)\n        }\n    }\n    appendChild(child) { \n        // if (child.root) { \n            // this.root.appendChild(child.root)\n            if (child) {\n                let range = document.createRange()\n                range.setStart(this.root, this.root.childNodes.length)\n                range.setEnd(this.root, this.root.childNodes.length)\n                console.log('child', child)\n                child[RENDER_TO_DOM](range)\n            }\n            \n        // }\n    }\n\n    [RENDER_TO_DOM](range) { \n        range.deleteContents()\n        range.insertNode(this.root)  // 插入到末尾\n    }\n}\n\nclass TextWrapper { \n    constructor(content) { \n        this.root = document.createTextNode(content)\n    }\n    [RENDER_TO_DOM](range) { \n        range.deleteContents()\n        range.insertNode(this.root)  // 插入到末尾\n    }\n}\n\nclass Component { \n    constructor(props) { \n        this._root = null\n        this.props = props\n        this.attributes = {}\n        this.children = []\n        this._range = null\n    }\n    setAttribute(name, value) { \n        this.attributes[name] = value    // props还未实现\n    }\n    appendChild(child) {    // component 添加 \n        this.children.push(child)\n    }\n    [RENDER_TO_DOM](range) { \n        this._range = range\n        this.render()[RENDER_TO_DOM](range)\n    }\n    rerender() {\n        let oldRange = this._range \n\n        let range = document.createRange()\n        range.setStart(oldRange.startContainer, oldRange.startOffset)\n        range.setEnd(oldRange.startContainer, oldRange.startOffset)\n        this[RENDER_TO_DOM](range)\n\n        oldRange.setStart(range.endContainer, range.endOffset)\n        oldRange.deleteContents()\n    }\n    setState(newState) { \n        if (this.state === null || typeof this.state !== 'object') { \n            this.state = newState\n            this.rerender()\n            return\n        }\n        let merge = (oldState, newState) => { \n            for (let p in newState) { \n                if (oldState[p] === null || typeof oldState[p] !== 'object') {\n                    oldState[p] = newState[p]\n                } else { \n                    merge(oldState[p], newState[p])\n                }\n            }\n        }\n        merge(this.state, newState)\n        this.rerender()\n    }\n    // 第1课\n    // get root() { \n    //     if (!this._root) { \n    //         this._root = this.render().root\n    //     }\n    //     return this._root\n    // }\n}\n\nfunction insertChild(children, parent) { \n    // if (\n    //     typeof child == 'object' &&\n    //     child instanceof Array\n    // ) { \n    //     for (let c of child) { \n    //         insertChild(c, parent)\n    //     }\n    // }\n    // if (child === null) {\n    //     return\n    // }\n    // if (typeof child === 'string') {\n    //     child = new TextWrapper(child)\n    // }\n    // parent.appendChild(child)\n    \n    for(let child of children) {\n        if (typeof child === 'string') {\n            child = new TextWrapper(child)\n        }\n        if (child === null) {\n            continue\n        }\n        if (typeof child == 'object' &&\n            child instanceof Array) {\n                insertChild(child, parent)\n        } else {\n            parent.appendChild(child)\n        }\n    }\n}\n\n/**\n * @param {*} type \n * @param {*} attributes \n * @param  {...any} children \n */\nfunction createElement(type, attributes, ...children) {\n    let e\n    if (typeof type === 'string') {\n        e = new ElementWrapper(type)\n    } else {\n        e = new type(attributes)\n    }\n    if(attributes) {\n        for(let key in attributes) {\n            let value = attributes[key]\n            e.setAttribute(key, value)\n        }\n    }\n    // if (children) {\n    //     for (let child of children) {\n    //         insertChild(child, e)          \n    //     }\n    // }\n    if (children) {\n        insertChild(children, e)\n    }\n    return e\n}\n\nfunction render(component, mountEle) { \n    // 第1课\n    // mountEle.appendChild(component.root)\n    let range = document.createRange()\n    range.setStart(mountEle, 0)\n    range.setEnd(mountEle, mountEle.childNodes.length)\n    range.deleteContents()\n    component[RENDER_TO_DOM](range)\n}\n\n\nexport { \n    createElement,\n    Component,\n    render\n}"],"sourceRoot":""}